# 电影网站 - Web应用开发课程设计项目

## 项目简介

这是一个基于Node.js和Express框架开发的电影主题网站，旨在为用户提供电影浏览、搜索、分类筛选等功能。项目完全满足Web应用开发课程的所有技术要求，包括前端基础、交互技术、前端框架、动态技术、后端技术和数据存储等方面。

## 技术栈

### 前端技术
- **HTML5**: 使用语义化标签构建页面结构
- **CSS3**: 
  - 响应式布局（媒体查询）
  - CSS3动画效果（淡入、滑入、弹跳动画）
  - 渐变背景和过渡效果
- **JavaScript**: 
  - 原生JavaScript实现DOM操作
  - jQuery框架进行事件处理和AJAX请求
  - 表单实时验证和错误提示
- **Bootstrap 5.x**: 
  - Jumbotron（巨幕）组件定制化设计
  - Carousel（轮播图）组件，支持自动播放和手动切换
  - 响应式网格系统和组件

### 后端技术
- **Node.js**: 服务器运行环境
- **Express框架**: 
  - 路由管理
  - 中间件配置
  - 模板引擎集成
- **EJS模板引擎**: 
  - 动态页面渲染
  - 数据绑定
  - 条件渲染和循环渲染
  - 模板复用（partials）

### 数据存储
- **JSON文件系统**: 
  - `data/users.json` - 用户数据存储
  - `data/movies.json` - 电影数据存储
  - 实现CRUD操作的数据管理模块

### 其他技术
- **express-session**: 用户会话管理
- **cookie-parser**: Cookie处理
- **bcryptjs**: 密码加密存储
- **body-parser**: 请求体解析

## 项目结构

```
program/
├── server.js                 # Express服务器入口文件
├── package.json              # 项目依赖配置
├── README.md                 # 项目说明文档
├── data/                     # 数据存储目录
│   ├── users.json           # 用户数据文件
│   └── movies.json          # 电影数据文件
├── utils/                    # 工具函数目录
│   ├── dataManager.js       # 数据管理模块
│   └── auth.js              # 认证工具函数
├── routes/                   # 路由文件目录
│   ├── index.js             # 首页路由
│   ├── movies.js            # 电影相关路由
│   ├── auth.js              # 认证路由（登录/注册）
│   └── user.js              # 用户路由（个人中心）
├── views/                   # EJS模板目录
│   ├── layouts/             # 布局模板
│   │   └── main.ejs        # 主布局（已废弃，改用页面直接包含）
│   ├── partials/           # 公共组件
│   │   ├── header.ejs      # 页头组件
│   │   ├── nav.ejs         # 导航组件
│   │   ├── aside.ejs       # 侧边栏组件
│   │   └── footer.ejs      # 页脚组件
│   └── pages/              # 页面模板
│       ├── index.ejs       # 首页
│       ├── movies.ejs      # 电影列表页
│       ├── movie-detail.ejs # 电影详情页
│       ├── search.ejs      # 搜索结果页
│       ├── register.ejs    # 注册页面
│       ├── login.ejs       # 登录页面
│       ├── profile.ejs     # 个人中心
│       └── error.ejs       # 错误页面
└── public/                 # 静态资源目录
    ├── css/
    │   └── style.css       # 自定义样式文件
    ├── js/
    │   └── main.js         # 自定义JavaScript文件
    └── images/             # 图片资源目录
```

## 功能特性

### 1. 页面结构（8个相互关联的页面）

1. **首页** (`/`)
   - Jumbotron巨幕组件展示
   - 轮播图展示推荐电影
   - 热门电影推荐列表

2. **电影列表页** (`/movies`)
   - 显示所有电影
   - 支持按类型和年份筛选
   - 响应式网格布局

3. **电影详情页** (`/movies/:id`)
   - 显示电影详细信息
   - 相关电影推荐
   - 电影评分和分类标签

4. **搜索结果页** (`/movies?search=关键词`)
   - 根据关键词搜索电影
   - 显示搜索结果数量

5. **用户注册页** (`/auth/register`)
   - 用户注册表单
   - 前端实时验证
   - 后端数据验证

6. **用户登录页** (`/auth/login`)
   - 用户登录表单
   - 会话管理
   - 记住我功能

7. **个人中心** (`/user/profile`)
   - 个人信息展示
   - 修改邮箱和密码
   - 账户信息管理

8. **错误页面** (`/404`)
   - 404错误处理
   - 友好的错误提示

### 2. 表单功能（3种不同类型的表单）

#### 注册表单
- **字段**: 用户名、邮箱、密码、确认密码
- **前端验证**: 
  - 用户名格式验证（3-20个字符，字母数字下划线）
  - 邮箱格式验证
  - 密码强度验证（至少6个字符）
  - 密码一致性验证
  - 实时错误提示
- **后端验证**: 
  - 数据完整性检查
  - 用户名和邮箱唯一性验证
  - 密码加密存储（bcrypt）

#### 登录表单
- **字段**: 用户名、密码、记住我
- **前端验证**: 必填字段验证
- **后端验证**: 
  - 用户身份验证
  - 密码比对验证
  - Session创建

#### 个人信息表单（个人中心）
- **字段**: 邮箱、原密码、新密码、确认密码
- **前端验证**: 
  - 邮箱格式验证
  - 密码修改时的完整性验证
- **后端验证**: 
  - 原密码验证
  - 新密码强度验证
  - 数据更新

### 3. 用户会话管理

- **Session管理**: 使用express-session实现
- **Cookie设置**: 24小时有效期
- **登录状态**: 全局用户状态管理
- **登出功能**: 清除Session和Cookie

### 4. Bootstrap组件集成

#### Jumbotron（巨幕）组件
- **位置**: 首页顶部
- **定制化**: 
  - 渐变背景（紫色到蓝色）
  - 自定义动画效果
  - 响应式文字大小
  - 旋转背景动画

#### Carousel（轮播图）组件
- **位置**: 首页
- **功能**: 
  - 自动播放（3秒间隔）
  - 手动切换（前后按钮）
  - 指示器导航
  - 响应式高度调整

### 5. CSS3动画效果

1. **淡入动画** (`animate-fade-in`)
   - 应用于Jumbotron标题
   - 1秒淡入效果

2. **滑入动画** (`animate-slide-up`)
   - 应用于Jumbotron副标题
   - 从下方滑入并淡入

3. **弹跳动画** (`animate-bounce`)
   - 应用于按钮
   - 持续弹跳效果

4. **悬停效果**
   - 卡片悬停上浮
   - 阴影加深
   - 颜色过渡

### 6. 响应式设计

- **桌面端** (>992px): 完整布局，三栏结构
- **平板端** (768px-992px): 调整字体和间距
- **移动端** (<768px): 单栏布局，优化触摸体验

### 7. EJS模板引擎特性

- **动态数据绑定**: 电影列表、用户信息等
- **条件渲染**: 根据登录状态显示不同内容
- **循环渲染**: 电影列表、分类标签等
- **模板复用**: Header、Nav、Aside、Footer组件化

## 安装和运行

### 环境要求

- Node.js >= 14.0.0
- npm >= 6.0.0

### 安装步骤

1. **克隆或下载项目**
   ```bash
   cd program
   ```

2. **安装依赖**
   ```bash
   npm install
   ```

3. **启动服务器**
   ```bash
   npm start
   ```
   或者使用开发模式（自动重启）：
   ```bash
   npm run dev
   ```

4. **访问网站**
   打开浏览器访问: `http://localhost:3000`

### 默认数据

项目已包含8部示例电影数据，可以直接浏览和测试。

## 使用说明

### 浏览电影

1. 访问首页查看推荐电影
2. 点击"电影列表"浏览所有电影
3. 使用筛选器按类型或年份筛选
4. 点击电影卡片查看详细信息

### 用户注册和登录

1. 点击右上角"注册"按钮
2. 填写注册信息（用户名、邮箱、密码）
3. 注册成功后自动登录
4. 已注册用户可直接登录

### 个人中心

1. 登录后点击"个人中心"
2. 可以修改邮箱地址
3. 可以修改密码（需要输入原密码）

### 搜索功能

1. 在顶部搜索框输入关键词
2. 点击搜索按钮或按回车
3. 查看搜索结果

## 技术实现亮点

### 1. 数据管理模块

`utils/dataManager.js` 提供了完整的数据CRUD操作：
- 用户数据管理（创建、查询、更新）
- 电影数据管理（查询、筛选、搜索）
- JSON文件读写封装

### 2. 认证系统

`utils/auth.js` 提供：
- 密码加密（bcrypt）
- 密码验证
- 邮箱和用户名格式验证

### 3. 表单验证

前端（`public/js/main.js`）：
- 实时验证
- 错误提示
- 表单状态管理

后端（`routes/auth.js`, `routes/user.js`）：
- 数据安全性校验
- 防注入处理（使用body-parser）
- 错误处理机制

### 4. 路由设计

- RESTful风格路由
- 中间件验证（登录保护）
- 错误处理

### 5. 响应式布局

- Bootstrap网格系统
- 媒体查询优化
- 移动端适配

## 课程要求对照

| 要求项 | 实现情况 | 说明 |
|--------|---------|------|
| HTML5语义化标签 | ✅ | 使用header、nav、main、aside、footer等 |
| CSS3响应式布局 | ✅ | 媒体查询适配三端 |
| 原生JavaScript | ✅ | DOM操作和事件处理 |
| jQuery框架 | ✅ | AJAX和表单验证 |
| Bootstrap 5.x | ✅ | Jumbotron、Carousel等组件 |
| AJAX异步请求 | ✅ | 搜索功能（可扩展） |
| JSON数据处理 | ✅ | 电影和用户数据管理 |
| Node.js服务 | ✅ | Express服务器 |
| Express框架 | ✅ | 路由和中间件 |
| 数据持久化 | ✅ | JSON文件系统 |
| 8个关联页面 | ✅ | 首页、列表、详情、搜索、注册、登录、个人中心、错误页 |
| 3种表单 | ✅ | 注册、登录、个人信息 |
| 前端表单验证 | ✅ | 实时验证和错误提示 |
| 后端表单验证 | ✅ | 数据校验和安全性 |
| Session/Cookie | ✅ | 用户会话管理 |
| Jumbotron组件 | ✅ | 首页定制化巨幕 |
| Carousel轮播图 | ✅ | 自动播放和手动切换 |
| 统一色彩体系 | ✅ | CSS变量定义 |
| 2种CSS3动画 | ✅ | 淡入、滑入、弹跳动画 |
| EJS模板引擎 | ✅ | 动态页面渲染 |
| 5种页面模板 | ✅ | 不同风格的页面设计 |
| 动态数据绑定 | ✅ | 电影列表、用户信息 |
| 条件渲染 | ✅ | 登录状态判断 |
| 循环渲染 | ✅ | 电影列表、分类标签 |

## 开发团队

本项目为Web应用开发课程设计项目。

## 许可证

MIT License

## 更新日志

### v1.0.0 (2024)
- 初始版本发布
- 实现所有基础功能
- 完成8个页面开发
- 实现表单验证和会话管理
- 集成Bootstrap组件和CSS3动画

## 注意事项

1. **数据存储**: 当前使用JSON文件存储，生产环境建议使用数据库（MySQL/MongoDB）
2. **安全性**: 密码使用bcrypt加密，Session密钥应妥善保管
3. **性能优化**: 大量数据时建议添加分页功能
4. **图片资源**: 当前使用占位符，实际项目中应使用真实电影海报

## 后续改进建议

1. 添加电影评论功能
2. 实现电影收藏功能
3. 添加用户头像上传
4. 实现电影评分功能
5. 添加管理员后台
6. 集成真实电影API
7. 添加分页功能
8. 优化搜索算法
9. 添加邮件验证
10. 实现忘记密码功能

## 联系方式

如有问题或建议，请联系开发团队。

---

**祝使用愉快！** 🎬

